#!/bin/bash

set -euo pipefail

dirname=$(pwd)
if [[ $# -eq 1 ]]; then
    dirname=$(readlink -f $1)
fi
mkdir -p $dirname
cd $dirname

tmuxname=$(basename $(dirname $(pwd)))/$(basename $(pwd))

if [ -z $TMUX ]; then
    tmux attach -t "$tmuxname"
else
    tmux switch-client -t "$tmuxname"
fi
